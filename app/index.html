<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeHUB PWA</title>
    <link rel="icon" href="https://alexandre7888.github.io/CodeHUB/CodeFOX/foto1.jpg" type="image/jpeg">
    <meta name="theme-color" content="#2c3e50">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #fff;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        p {
            font-size: 1.2rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            color: white;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            background: linear-gradient(to right, #feb47b, #ff7e5f);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-secondary {
            background: linear-gradient(to right, #4b6cb7, #182848);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(to right, #182848, #4b6cb7);
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: left;
        }
        
        .status-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .status-title svg {
            margin-right: 10px;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 5px solid #fff;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .logo {
            width: 120px;
            height: 120px;
            margin-bottom: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            align-self: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .feature {
            display: flex;
            align-items: center;
            margin: 15px 0;
            text-align: left;
        }
        
        .feature svg {
            min-width: 30px;
            margin-right: 15px;
            color: #ff7e5f;
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .pwa-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            margin-top: 15px;
        }
        
        .pwa-badge svg {
            margin-right: 8px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            p {
                font-size: 1rem;
            }
            
            .btn {
                padding: 12px 30px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="logo">
        <img src="https://alexandre7888.github.io/CodeHUB/CodeFOX/foto1.jpg" alt="CodeHUB Logo">
    </div>
    
    <div class="container">
        <h1>CodeHUB PWA</h1>
        <p>Experimente nosso aplicativo Progressive Web App com recursos offline</p>
        
        <div class="status-card">
            <div class="status-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 16V12M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Status do Aplicativo
            </div>
            <div id="statusText">Detectando seu ambiente de execução...</div>
        </div>
        
        <div id="browserView" style="display: none;">
            <p>Instale nosso PWA para uma experiência aprimorada e acesso offline!</p>
            <button class="btn" id="installBtn">Instalar CodeHUB PWA</button>
            <div class="pwa-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 18C17 16.3433 15.6567 15 14 15H10C8.34328 15 7 16.3433 7 18" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 15V12M12 12V9M12 12H9M12 12H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 3.5L12.3978 3.09171C12.2049 2.93666 11.9282 2.93666 11.7353 3.09171L12 3.5ZM4.5 6.5L4.10221 6.09171C3.93473 6.22396 3.85 6.43442 3.87916 6.64564C3.90832 6.85686 4.047 7.03473 4.24254 7.10829L4.5 6.5ZM19.5 6.5L19.7575 7.10829C19.953 7.03473 20.0917 6.85686 20.1208 6.64564C20.15 6.43442 20.0653 6.22396 19.8978 6.09171L19.5 6.5ZM11.7353 3.09171L4.10221 6.09171L4.89779 6.90829L12.3978 3.90829L11.7353 3.09171ZM12.3978 3.90829L19.8978 6.90829L20.1022 6.09171L12.6022 3.09171L12.3978 3.90829ZM4.24254 7.10829L11.7575 11.1083L12.2425 10.8917L4.72746 6.89171L4.24254 7.10829ZM11.7575 11.1083C11.9103 11.1769 12.0897 11.1769 12.2425 11.1083L12.2425 11.1083L19.7575 7.10829L19.7575 7.10829C19.9103 7.17688 20.0897 7.17688 20.2425 7.10829L20.2425 7.10829L12.2425 11.1083L11.7575 11.1083Z" fill="currentColor"/>
                </svg>
                Aplicativo Progressivo Web
            </div>
        </div>
        
        <div id="pwaView" style="display: none;">
            <p>Você está acessando através do aplicativo instalado!</p>
            <button class="btn" id="openBtn">Abrir CodeHUB</button>
        </div>
        
        <div class="loader" id="loader"></div>
        
        <div class="instructions">
            <h3>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 16V12M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Vantagens de usar o PWA
            </h3>
            <div class="feature">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 13C6.10457 13 7 12.1046 7 11C7 9.89543 6.10457 9 5 9C3.89543 9 3 9.89543 3 11C3 12.1046 3.89543 13 5 13Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 13C13.1046 13 14 12.1046 14 11C14 9.89543 13.1046 9 12 9C10.8954 9 10 9.89543 10 11C10 12.1046 10.8954 13 12 13Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M19 13C20.1046 13 21 12.1046 21 11C21 9.89543 20.1046 9 19 9C17.8954 9 17 9.89543 17 11C17 12.1046 17.8954 13 19 13Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M3 13V15C3 16.1046 3.89543 17 5 17C6.10457 17 7 16.1046 7 15V13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M10 13V15C10 16.1046 10.8954 17 12 17C13.1046 17 14 16.1046 14 15V13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M17 13V15C17 16.1046 17.8954 17 19 17C20.1046 17 21 16.1046 21 15V13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Funciona offline e carrega instantaneamente
            </div>
            <div class="feature">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M19.6224 10.3954C19.6224 10.3954 18.7801 7.5 12 7.5C5.21994 7.5 4.37759 10.3954 4.37759 10.3954C4.37759 10.3954 4.07178 16.5 12 16.5C19.9282 16.5 19.6224 10.3954 19.6224 10.3954Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                Acesso seguro com HTTPS
            </div>
            <div class="feature">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22V19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M5 19H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M5 5H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M7 9H17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M7 13H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M5 3L5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M19 3V21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Interface similar a aplicativo nativo
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const statusText = document.getElementById('statusText');
            const browserView = document.getElementById('browserView');
            const pwaView = document.getElementById('pwaView');
            const loader = document.getElementById('loader');
            const installBtn = document.getElementById('installBtn');
            const openBtn = document.getElementById('openBtn');
            
            let deferredPrompt;
            const appUrl = "https://alexandre7888.github.io/CodeHUB/";
            
            // Função para detectar se está em modo PWA
            function isRunningInPWA() {
                return window.matchMedia('(display-mode: standalone)').matches || 
                       window.navigator.standalone === true ||
                       document.referrer.includes('android-app://');
            }
            
            // Verificar o modo de execução
            if (isRunningInPWA()) {
                statusText.innerHTML = "Modo PWA detectado! Redirecionando para o CodeHUB...";
                loader.style.display = 'block';
                
                // Redirecionar após um breve delay para feedback visual
                setTimeout(function() {
                    window.location.href = appUrl;
                }, 2000);
            } else {
                statusText.innerHTML = "Modo navegador detectado. Instale nosso PWA para uma experiência melhorada!";
                browserView.style.display = 'block';
            }
            
            // Event listener para antes de instalar o PWA
            window.addEventListener('beforeinstallprompt', (e) => {
                // Previne que o mini-infobar apareça no mobile
                e.preventDefault();
                // Guarda o evento para que possa ser acionado depois
                deferredPrompt = e;
                // Atualiza a UI para notificar o usuário que pode instalar o PWA
                installBtn.style.display = 'inline-block';
            });
            
            // Event listener para botão de instalação
            installBtn.addEventListener('click', async () => {
                if (!deferredPrompt) {
                    statusText.innerHTML = "Seu navegador não suporta instalação de PWA.";
                    return;
                }
                
                // Mostra o prompt de instalação
                deferredPrompt.prompt();
                
                // Espera o usuário responder ao prompt
                const { outcome } = await deferredPrompt.userChoice;
                
                // Limpa o prompt guardado já que não pode ser usado novamente
                deferredPrompt = null;
                
                if (outcome === 'accepted') {
                    statusText.innerHTML = "PWA instalado com sucesso!";
                    installBtn.style.display = 'none';
                    pwaView.style.display = 'block';
                } else {
                    statusText.innerHTML = "Instalação do PWA cancelada.";
                }
            });
            
            // Event listener para botão de abrir aplicativo
            openBtn.addEventListener('click', function() {
                loader.style.display = 'block';
                statusText.innerHTML = "Abrindo CodeHUB...";
                
                setTimeout(function() {
                    window.location.href = appUrl;
                }, 1000);
            });
            
            // Verificar se o PWA já está instalado
            window.addEventListener('appinstalled', () => {
                statusText.innerHTML = "PWA instalado com sucesso! Redirecionando...";
                installBtn.style.display = 'none';
                pwaView.style.display = 'block';
                
                setTimeout(function() {
                    window.location.href = appUrl;
                }, 2000);
            });
            
            // Service Worker registration
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                        console.log('Service Worker registrado com sucesso: ', registration);
                    }, function(err) {
                        console.log('Falha no registro do Service Worker: ', err);
                    });
                });
            }
        });
    </script>
</body>
</html>
